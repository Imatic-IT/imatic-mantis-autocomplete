!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){return e[t]}n.r(t);let o={};let i;function l(){const e=document.querySelector("#imaticAutocompleteWidget");e&&(i(),e.remove())}function c(){const e=document.querySelector("#imaticAutocompleteWidget");e&&e.focus()}function u(e){let t=!1,n=0,u=null;function s(){t&&(t=!1,l())}function a(){return e.selectionStart-n}function d(){const t=a(),r=e.value.substr(n,t);return 0===r.length||null!=r.match(/[\n ]/)?null:r}const f=()=>{if(0!==e.selectionStart){if("@"===e.value[e.selectionStart-1])return t=!0,n=e.selectionStart,void(u=null);if(t){const c=d();if(null==c)return void s();const f=()=>{const c=function(e,t){for(let n=t.length;n>0;n--){const o=r(e,t.substr(0,n));if(null!=o)return o}}(o,d());if(null==c||0===c.length||!t)return l(),void(u=null);if(function(e,t){if(null==e||null==t)return null==e&&null==t;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(u,c))return;const s=a();u=c,function({completions:e,onSelect:t,focusInput:n,onRestyle:r,input:o}){l();let c=0;const u=e.map(e=>{const t=document.createTextNode(e),n=document.createElement("li");return n.setAttribute("tabindex",-1),n.appendChild(t),n}),s=document.createElement("ul");s.className="imatic-autocomplete",s.setAttribute("id","imaticAutocompleteWidget"),s.setAttribute("tabindex",-1),u.forEach(e=>s.appendChild(e));const a=new Set(["ArrowDown","ArrowUp","Enter","Tab"]);s.addEventListener("keydown",r=>{if(a.has(r.code))switch(r.preventDefault(),r.code){case"ArrowUp":{const e=s.querySelector(`li:nth-child(${c})`);e?(c--,e.focus()):n();break}case"ArrowDown":{const e=s.querySelector(`li:nth-child(${c+2})`);e&&(c++,e.focus())}break;case"Enter":if(t){function o(e){return e.replace(/.*\s/,"")}const n=o(e[c]);t({val:n}),l()}break;case"Tab":if(r.preventDefault(),t){function o(e){return e.replace(/.*\s/,"")}const n=o(e[c]);t({val:n}),l()}}}),s.addEventListener("focus",e=>{const t=s.querySelector("li");c=0,t&&t.focus()});const d=()=>r(s),f=e=>{e.target===o||e.target===s||s.contains(e.target)||l()},p=o.closest(".table-responsive");window.addEventListener("scroll",d),window.addEventListener("resize",d),o.addEventListener("scroll",d),p&&p.addEventListener("scroll",d),window.addEventListener("click",f),window.addEventListener("focusin",f),i=()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d),o.removeEventListener("scroll",d),p&&p.removeEventListener("scroll",d),window.removeEventListener("click",f),window.removeEventListener("focusin",f)},document.body.appendChild(s),d()}({completions:c,input:e,focusInput:()=>{const t=n+s;e.focus(),e.setSelectionRange(t,t)},onSelect:({val:r})=>{if(!t)return;const o=n+s,i=n+d().length;e.focus(),e.setRangeText(r.substr(s)+" ",o,i,"end"),t=!1},onRestyle:t=>{const n=e.getBoundingClientRect(),r=function(e,t){const n=document.createElement("span");n.textContent=t;const r=document.createElement("div");r.appendChild(n),Array.from(e).forEach((function(t){r.style.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})),r.style.visibility="hidden",document.body.appendChild(r);const o={width:n.offsetWidth,height:n.offsetHeight};return r.remove(),o}(getComputedStyle(e),e.value.substr(0,e.selectionStart)).height;t.style.position="fixed",t.style.left=Math.max(0,n.x)+"px",t.style.top=n.y+r+5-e.scrollTop+"px",t.style.width=e.clientWidth+"px"}})};if(null!=r(o,c))return f(r(o,c));let p=document.querySelectorAll('select[name="handler_id"]'),m=[];for(let e=0;e<p.length;e++){let t=p[e].options;for(let e=0;e<t.length;e++)m.push(t[e].textContent)}m=m.filter((function(e){return"[Myself]"!==e&&"[Reporter]"!==e})),function(e,t){let n=t.filter((function(t){if(0===t.replace(/.*\s/,"").indexOf(e))return t.includes(e)}));o=function(e,t,n){return Object.assign({},e,{[t]:n})}(o,e,n),f()}(c,m)}}else s()};e.addEventListener("keydown",r=>{if(t){switch(r.code){case"ArrowDown":r.preventDefault(),c();break;case"ArrowUp":s();break;case"ArrowLeft":case"ArrowRight":setTimeout(()=>f(),0);break;case"Tab":{if(r.preventDefault(),!t)return;c();const o=a(),i=document.querySelector("#imaticAutocompleteWidget").firstChild;if(i){const r=i.textContent.replace(/.*\s/,""),c=n+o,u=n+d().length;e.focus(),e.setRangeText(r.substr(o)+" ",c,u,"end"),l(),t=!1}}}"ArrowDown"===r.code&&c()}}),e.addEventListener("input",e=>{f()})}document.querySelectorAll("#bugnote_text, #description, #steps_to_reproduce, #additional_info, #summary, #additional_information").forEach(e=>{u(e)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vanMvdXRpbHMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjYWNoZSIsInRlcm0iLCJyZXN1bHRDYWNoZSIsImRlc3Ryb3lMaXN0Rm4iLCJjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIiwiZm9jdXNBdXRvY29tcGxldGVMaXN0IiwiZm9jdXMiLCJhdXRvY29tcGxldGUiLCJhdXRvY29tcGxldGluZyIsInN0YXJ0U2VsIiwiYWN0aXZlQ29tcGxldGlvbnMiLCJzdG9wQXV0b2NvbXBsZXRlIiwiZ2V0U2VsZWN0aW9uTGVuZ3RoIiwic2VsZWN0aW9uU3RhcnQiLCJnZXRTZWxlY3Rpb24iLCJsZW4iLCJzZWxlY3Rpb24iLCJzdWJzdHIiLCJsZW5ndGgiLCJtYXRjaCIsImhhbmRsZUNoYW5nZSIsInYiLCJyZWNlaXZlQ29tcGxldGlvbnMiLCJjb21wbGV0aW9ucyIsInJlcyIsInYxIiwidjIiLCJmbGF0QXJyYXlzRXF1YWwiLCJvblNlbGVjdCIsImZvY3VzSW5wdXQiLCJvblJlc3R5bGUiLCJpbnB1dCIsImZvY3VzZWQiLCJjb21wbGV0aW9uRWxzIiwibWFwIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwibGkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJ1bCIsImNsYXNzTmFtZSIsImZvckVhY2giLCJjb250cm9sS2V5cyIsIlNldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaGFzIiwiY29kZSIsInByZXZlbnREZWZhdWx0IiwibmV3QWN0aXZlIiwicmVtb3ZlSWNvbkZyb21OYW1lIiwibmFtZVdpdGhJY29uIiwicmVwbGFjZSIsIm5hbWVXaXRob3V0SWNvbiIsInZhbCIsImZpcnN0TGkiLCJyZXN0eWxlIiwiY2xvc2VJZk91dHNpZGVUYXJnZXQiLCJ0YXJnZXQiLCJjb250YWlucyIsInNjQ29udGFpbmVyIiwiY2xvc2VzdCIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJib2R5Iiwib3BlbkF1dG9jb21wbGV0ZUxpc3RFbCIsInJlcXVpcmVkU2VsIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJyZXBsYWNlVG8iLCJzZXRSYW5nZVRleHQiLCJsaXN0RWwiLCJsaXN0UG9zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidGV4dEhlaWdodCIsImNvbXB1dGVkU3R5bGUiLCJzcGFuIiwidGV4dENvbnRlbnQiLCJkaXYiLCJBcnJheSIsImZyb20iLCJzdHlsZSIsInNldFByb3BlcnR5IiwiZ2V0UHJvcGVydHlWYWx1ZSIsImdldFByb3BlcnR5UHJpb3JpdHkiLCJ2aXNpYmlsaXR5IiwiZGF0YSIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJnZXRDb21wdXRlZFN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwiTWF0aCIsIm1heCIsIngiLCJ0b3AiLCJ5Iiwic2Nyb2xsVG9wIiwiY2xpZW50V2lkdGgiLCJoYW5kbGVyc1NlbGVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvcHRpb25zIiwiaiIsInB1c2giLCJmaWx0ZXIiLCJoYW5kbGVyIiwidXNlcnMiLCJmaWx0ZXJlZFVzZXJzIiwidXNlciIsImluZGV4T2YiLCJpbmNsdWRlcyIsImFzc2lnbiIsImZpbHRlclVzZXJzQnlTdHJpbmciLCJzZXRUaW1lb3V0IiwiZmlyc3RDaGlsZCIsInRleHRWYWx1ZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVB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LE1BS1JsQixTQUNLcUcsaUJBQ0cseUdBRUg1RCxRQUFTMUMsSUFDTk0sRUFBYU4iLCJmaWxlIjoiYXV0b2NvbXBsZXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4ge307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQoY2FjaGUsIHRlcm0sIHZhbHVlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNhY2hlLCB7W3Rlcm1dOiB2YWx1ZX0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNhY2hlLCB0ZXJtKSB7XG4gICAgcmV0dXJuIGNhY2hlW3Rlcm1dO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzKGNhY2hlLCB0ZXJtKSB7XG4gICAgcmV0dXJuIGdldChjYWNoZSwgdGVybSkgIT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJlc3RNYXRjaChjYWNoZSwgdGVybSkge1xuICAgIGZvciAobGV0IGkgPSB0ZXJtLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgICBjb25zdCByZXMgPSBnZXQoY2FjaGUsIHRlcm0uc3Vic3RyKDAsIGkpKTtcbiAgICAgICAgaWYgKHJlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgdSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCAqIGFzIGNhY2hlIGZyb20gJy4vY2FjaGUnO1xuXG5sZXQgcmVzdWx0Q2FjaGUgPSBjYWNoZS5jcmVhdGUoKTtcbmNvbnN0IG1heF9sZW4gPSAxOTE7XG5sZXQgZGVzdHJveUxpc3RGbjtcblxuZnVuY3Rpb24gZmxhdEFycmF5c0VxdWFsKHYxLCB2Mikge1xuICAgIGlmICh2MSA9PSBudWxsIHx8IHYyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHYxID09IG51bGwgJiYgdjIgPT0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodjEubGVuZ3RoICE9PSB2Mi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdjEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHYxW2ldICE9PSB2MltpXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIG9wZW5BdXRvY29tcGxldGVMaXN0RWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG5cbiAgICBsZXQgZm9jdXNlZCA9IDA7XG5cbiAgICBjb25zdCBjb21wbGV0aW9uRWxzID0gY29tcGxldGlvbnMubWFwKCh2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2KTtcblxuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XG4gICAgICAgIGxpLmFwcGVuZENoaWxkKHRleHQpO1xuXG4gICAgICAgIHJldHVybiBsaTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICB1bC5jbGFzc05hbWUgPSAnaW1hdGljLWF1dG9jb21wbGV0ZSc7XG4gICAgdWwuc2V0QXR0cmlidXRlKCdpZCcsICdpbWF0aWNBdXRvY29tcGxldGVXaWRnZXQnKTtcbiAgICB1bC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpO1xuICAgIGNvbXBsZXRpb25FbHMuZm9yRWFjaCgoZWwpID0+IHVsLmFwcGVuZENoaWxkKGVsKSk7XG5cbiAgICBjb25zdCBjb250cm9sS2V5cyA9IG5ldyBTZXQoWydBcnJvd0Rvd24nLCAnQXJyb3dVcCcsICdFbnRlcicsICdUYWInXSk7XG5cbiAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sS2V5cy5oYXMoZS5jb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZ1xuXG4gICAgICAgIHN3aXRjaCAoZS5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1VwJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZSA9IHVsLnF1ZXJ5U2VsZWN0b3IoYGxpOm50aC1jaGlsZCgke2ZvY3VzZWR9KWApO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNlZC0tO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3RpdmUuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c0lucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZSA9IHVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgIGBsaTpudGgtY2hpbGQoJHtmb2N1c2VkICsgMn0pYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c2VkKys7XG4gICAgICAgICAgICAgICAgICAgIG5ld0FjdGl2ZS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0VudGVyJzoge1xuICAgICAgICAgICAgICAgIGlmIChvblNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVJY29uRnJvbU5hbWUobmFtZVdpdGhJY29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZVdpdGhJY29uLnJlcGxhY2UoLy4qXFxzLywgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVXaXRob3V0SWNvbiA9IHJlbW92ZUljb25Gcm9tTmFtZShjb21wbGV0aW9uc1tmb2N1c2VkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Qoe3ZhbDogbmFtZVdpdGhvdXRJY29ufSk7XG4gICAgICAgICAgICAgICAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUYWInOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgaWYgKG9uU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUljb25Gcm9tTmFtZShuYW1lV2l0aEljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lV2l0aEljb24ucmVwbGFjZSgvLipcXHMvLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZVdpdGhvdXRJY29uID0gcmVtb3ZlSWNvbkZyb21OYW1lKGNvbXBsZXRpb25zW2ZvY3VzZWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdCh7dmFsOiBuYW1lV2l0aG91dEljb259KTtcbiAgICAgICAgICAgICAgICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBmaXJzdExpID0gdWwucXVlcnlTZWxlY3RvcignbGknKTtcbiAgICAgICAgZm9jdXNlZCA9IDA7XG4gICAgICAgIGlmIChmaXJzdExpKSB7XG4gICAgICAgICAgICBmaXJzdExpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3R5bGUgPSAoKSA9PiBvblJlc3R5bGUodWwpO1xuXG4gICAgY29uc3QgY2xvc2VJZk91dHNpZGVUYXJnZXQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGlucHV0IHx8IGUudGFyZ2V0ID09PSB1bCB8fCB1bC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNjQ29udGFpbmVyID0gaW5wdXQuY2xvc2VzdCgnLnRhYmxlLXJlc3BvbnNpdmUnKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzdHlsZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgaWYgKHNjQ29udGFpbmVyKSB7XG4gICAgICAgIHNjQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG5cbiAgICBkZXN0cm95TGlzdEZuID0gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXN0eWxlKTtcbiAgICAgICAgaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgICAgIGlmIChzY0NvbnRhaW5lcikge1xuICAgICAgICAgICAgc2NDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VJZk91dHNpZGVUYXJnZXQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGNsb3NlSWZPdXRzaWRlVGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh1bCk7XG5cbiAgICByZXN0eWxlKCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCkge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ltYXRpY0F1dG9jb21wbGV0ZVdpZGdldCcpO1xuICAgIGlmIChlbCkge1xuICAgICAgICBkZXN0cm95TGlzdEZuKCk7XG4gICAgICAgIGVsLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9jdXNBdXRvY29tcGxldGVMaXN0KCkge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ltYXRpY0F1dG9jb21wbGV0ZVdpZGdldCcpO1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVsLmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGF1dG9jb21wbGV0ZShlbCkge1xuICAgIGxldCBhdXRvY29tcGxldGluZyA9IGZhbHNlO1xuICAgIGxldCBzdGFydFNlbCA9IDA7XG4gICAgbGV0IGFjdGl2ZUNvbXBsZXRpb25zID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIHN0b3BBdXRvY29tcGxldGUoKSB7XG4gICAgICAgIGlmICghYXV0b2NvbXBsZXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF1dG9jb21wbGV0aW5nID0gZmFsc2U7XG4gICAgICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0aW9uTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gZWwuc2VsZWN0aW9uU3RhcnQgLSBzdGFydFNlbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZWxlY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IGdldFNlbGVjdGlvbkxlbmd0aCgpO1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlbC52YWx1ZS5zdWJzdHIoc3RhcnRTZWwsIGxlbik7XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDAgfHwgc2VsZWN0aW9uLm1hdGNoKC9bXFxuIF0vKSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxlY3Rpb247XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoZWwuc2VsZWN0aW9uU3RhcnQgPT09IDApIHtcbiAgICAgICAgICAgIHN0b3BBdXRvY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbC52YWx1ZVtlbC5zZWxlY3Rpb25TdGFydCAtIDFdID09PSAnQCcpIHtcbiAgICAgICAgICAgIGF1dG9jb21wbGV0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXJ0U2VsID0gZWwuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICBhY3RpdmVDb21wbGV0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXV0b2NvbXBsZXRpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBnZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh2ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdG9wQXV0b2NvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZWNlaXZlQ29tcGxldGlvbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnMgPSBjYWNoZS5nZXRCZXN0TWF0Y2goXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdENhY2hlLFxuICAgICAgICAgICAgICAgICAgICBnZXRTZWxlY3Rpb24oKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9ucyA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAhYXV0b2NvbXBsZXRpbmdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ29tcGxldGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZsYXRBcnJheXNFcXVhbChhY3RpdmVDb21wbGV0aW9ucywgY29tcGxldGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBnZXRTZWxlY3Rpb25MZW5ndGgoKTtcbiAgICAgICAgICAgICAgICBhY3RpdmVDb21wbGV0aW9ucyA9IGNvbXBsZXRpb25zO1xuXG4gICAgICAgICAgICAgICAgb3BlbkF1dG9jb21wbGV0ZUxpc3RFbCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zOiBjb21wbGV0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGVsLFxuICAgICAgICAgICAgICAgICAgICBmb2N1c0lucHV0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZFNlbCA9IHN0YXJ0U2VsICsgbGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldFNlbGVjdGlvblJhbmdlKHJlcXVpcmVkU2VsLCByZXF1aXJlZFNlbCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0OiAoe3ZhbH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXV0b2NvbXBsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkU2VsID0gc3RhcnRTZWwgKyBsZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlVG8gPSBzdGFydFNlbCArIGdldFNlbGVjdGlvbigpLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldFJhbmdlVGV4dChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwuc3Vic3RyKGxlbikrICcgJywgLy8gJyAnIHdoaXRlc3BhY2UgYWZ0ZXIgaW5zZXJ0ZWQgQHVzZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFNlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlVG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGluZyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzdHlsZTogKGxpc3RFbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdFBvcyA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxTdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKGVsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEhlaWdodCA9IHUudGV4dFNpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxTdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwudmFsdWUuc3Vic3RyKDAsIGVsLnNlbGVjdGlvblN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgKS5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RFbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUubGVmdCA9IE1hdGgubWF4KDAsIGxpc3RQb3MueCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLnRvcCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFBvcy55ICsgdGV4dEhlaWdodCArIDUgLSBlbC5zY3JvbGxUb3AgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLndpZHRoID0gZWwuY2xpZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGNhY2hlLmhhcyhyZXN1bHRDYWNoZSwgdikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZUNvbXBsZXRpb25zKGNhY2hlLmdldChyZXN1bHRDYWNoZSwgdikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaGFuZGxlcnNTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3RbbmFtZT1cImhhbmRsZXJfaWRcIl0nKTtcbiAgICAgICAgICAgIGxldCBjb21wbGV0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhbmRsZXJzU2VsZWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBoYW5kbGVyc1NlbGVjdFtpXS5vcHRpb25zO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb3B0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9ucy5wdXNoKG9wdGlvbnNbal0udGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29tcGxldGlvbnMgPSBjb21wbGV0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlciAhPT0gXCJbTXlzZWxmXVwiICYmIGhhbmRsZXIgIT09IFwiW1JlcG9ydGVyXVwiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpbHRlclVzZXJzQnlTdHJpbmcodiwgY29tcGxldGlvbnMpXG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gZmlsdGVyVXNlcnNCeVN0cmluZyh2LCB1c2Vycykge1xuXG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkVXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24gKHVzZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5yZXBsYWNlKC8uKlxccy8sIFwiXCIpLmluZGV4T2YodikgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyLmluY2x1ZGVzKHYpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdENhY2hlID0gY2FjaGUuc2V0KHJlc3VsdENhY2hlLCB2LCBmaWx0ZXJlZFVzZXJzKTtcbiAgICAgICAgICAgICAgICByZWNlaXZlQ29tcGxldGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgaWYgKCFhdXRvY29tcGxldGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZ1xuICAgICAgICAgICAgICAgIGZvY3VzQXV0b2NvbXBsZXRlTGlzdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgc3RvcEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IGVsZW1lbnQgaGFzIGNvcnJlY3Qgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBoYW5kbGVDaGFuZ2UoKSwgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlJ1RhYic6e1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWF1dG9jb21wbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9jdXNBdXRvY29tcGxldGVMaXN0KCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBnZXRTZWxlY3Rpb25MZW5ndGgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoaWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ltYXRpY0F1dG9jb21wbGV0ZVdpZGdldCcpLmZpcnN0Q2hpbGQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcm9sZSBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRWYWx1ZSA9IGZpcnN0Q2hpbGQudGV4dENvbnRlbnQucmVwbGFjZSgvLipcXHMvLCBcIlwiKTs7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkU2VsID0gc3RhcnRTZWwgKyBsZW47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VUbyA9IHN0YXJ0U2VsICsgZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLnNldFJhbmdlVGV4dChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRWYWx1ZS5zdWJzdHIobGVuKSsgJyAnLCAvLyAnICcgd2hpdGVzcGFjZSBhZnRlciBpbnNlcnRlZCBAdXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRTZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlVG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAnZW5kJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0aW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgZm9jdXNBdXRvY29tcGxldGVMaXN0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIGhhbmRsZUNoYW5nZSgpO1xuICAgIH0pO1xufVxuXG5cbmRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICcjYnVnbm90ZV90ZXh0LCAjZGVzY3JpcHRpb24sICNzdGVwc190b19yZXByb2R1Y2UsICNhZGRpdGlvbmFsX2luZm8sICNzdW1tYXJ5LCAjYWRkaXRpb25hbF9pbmZvcm1hdGlvbidcbiAgICApXG4gICAgLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGF1dG9jb21wbGV0ZShlbCk7XG4gICAgfSk7IiwiLyoqXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IGNvbXB1dGVkU3R5bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKlxuICogQHJldHVybnMge3t3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcn19XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0U2l6ZShjb21wdXRlZFN0eWxlLCB0ZXh0KSB7XG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICBBcnJheS5mcm9tKGNvbXB1dGVkU3R5bGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBkaXYuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoa2V5KSxcbiAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShrZXkpXG4gICAgICAgICk7XG4gICAgfSk7XG4gICAgZGl2LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICBjb25zdCBkYXRhID0ge3dpZHRoOiBzcGFuLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHNwYW4ub2Zmc2V0SGVpZ2h0fTtcblxuICAgIGRpdi5yZW1vdmUoKTtcblxuICAgIHJldHVybiBkYXRhO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==