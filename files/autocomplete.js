!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){const n=document.createElement("span");n.textContent=t;const o=document.createElement("div");o.appendChild(n),Array.from(e).forEach((function(t){o.style.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})),o.style.visibility="hidden",document.body.appendChild(o);const r={width:n.offsetWidth,height:n.offsetHeight};return o.remove(),r}function r(e,t){return e[t]}n.r(t);let i={};const c=function(){const e=document.querySelector("[data-imatic-autocomplete-url]");if(null===e)return null;return e.dataset.imaticAutocompleteUrl}();let l;function u(){const e=document.querySelector("#imaticAutocompleteWidget");e&&(l(),e.remove())}function s(){const e=document.querySelector("#imaticAutocompleteWidget");e&&e.focus()}function d(e){let t=!1,n=0,d=null;function a(){t&&(t=!1,u())}function f(){return e.selectionStart-n}function p(){const t=f(),o=e.value.substr(n,t);return 0===o.length||null!=o.match(/[\n ]/)?null:o}const m=()=>{if(0!==e.selectionStart){if("@"===e.value[e.selectionStart-1])return t=!0,n=e.selectionStart,void(d=null);if(t){const s=p();if(null==s)return void a();const m=()=>{const c=function(e,t){for(let n=t.length;n>0;n--){const o=r(e,t.substr(0,n));if(null!=o)return o}}(i,p());if(null==c||0===c.length||!t)return u(),void(d=null);if(function(e,t){if(null==e||null==t)return null==e&&null==t;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(d,c))return;const s=f();d=c,function({completions:e,onSelect:t,focusInput:n,onRestyle:o,input:r}){u();let i=0;const c=e.map(e=>{const t=document.createTextNode(e),n=document.createElement("li");return n.setAttribute("tabindex",-1),n.appendChild(t),n}),s=document.createElement("ul");s.className="imatic-autocomplete",s.setAttribute("id","imaticAutocompleteWidget"),s.setAttribute("tabindex",-1),c.forEach(e=>s.appendChild(e));const d=new Set(["ArrowDown","ArrowUp","Enter"]);s.addEventListener("keydown",o=>{if(d.has(o.code))switch(o.preventDefault(),o.code){case"ArrowUp":{const e=s.querySelector(`li:nth-child(${i})`);e?(i--,e.focus()):n();break}case"ArrowDown":{const e=s.querySelector(`li:nth-child(${i+2})`);e&&(i++,e.focus())}break;case"Enter":t&&t({val:e[i]}),u()}}),s.addEventListener("click",e=>{var n=$(e.target).text();t({val:n}),u()}),s.addEventListener("focus",e=>{const t=s.querySelector("li");i=0,t&&t.focus()});const a=()=>o(s),f=e=>{e.target===r||e.target===s||s.contains(e.target)||u()},p=r.closest(".table-responsive");var m=document.getElementById("bugnote_text");m.addEventListener("input",a),m.addEventListener("click",a),m.addEventListener("resize",a),window.addEventListener("scroll",a),window.addEventListener("resize",a),r.addEventListener("scroll",a),p&&p.addEventListener("scroll",a),window.addEventListener("click",f),window.addEventListener("focusin",f),l=()=>{m.addEventListener("input",a),m.addEventListener("click",a),m.addEventListener("resize",a),window.removeEventListener("scroll",a),window.removeEventListener("resize",a),r.removeEventListener("scroll",a),p&&p.removeEventListener("scroll",a),window.removeEventListener("click",f),window.removeEventListener("focusin",f)},document.body.appendChild(s),a()}({completions:c,input:e,focusInput:()=>{const t=n+s;e.focus(),e.setSelectionRange(t,t)},onSelect:({val:o})=>{if(!t)return;const r=n+s;e.focus(),e.setRangeText(o.substr(s),r,r,"end")},onRestyle:t=>{const n=e.getBoundingClientRect(),r=getComputedStyle(e);let i=document.getElementById("imaticAutocompleteWidget");const c=o(r,e.value.substr(0,e.selectionStart)).height;if(t.style.position="fixed",t.style.left=Math.max(0,n.x)+"px",t.style.top=n.y+c+5-e.scrollTop+"px",t.style.width=e.clientWidth+"px",i){const i=o(r,e.value.substr(0,e.selectionStart)).height,c=document.getElementById("imaticAutocompleteWidget").getBoundingClientRect(),l=n.y-c.y+25;l>-20&&(t.style.top=n.y+i+5-e.scrollTop+l+"px")}}})};if(null!=r(i,s))return m(r(i,s));fetch(function(e){const t=new URL(c,location.href);return t.searchParams.append("search",e),t}(s)).then(e=>e.json()).then(e=>{i=function(e,t,n){return Object.assign({},e,{[t]:n})}(i,s,e),m()})}}else a()};e.addEventListener("keydown",e=>{if(t){switch(e.code){case"ArrowDown":e.preventDefault(),s();break;case"ArrowUp":a();break;case"ArrowLeft":case"ArrowRight":setTimeout(()=>m(),0)}"ArrowDown"===e.code&&s()}}),e.addEventListener("input",e=>{m()})}null!=c&&document.querySelectorAll("#bugnote_text, #description, #steps_to_reproduce, #additional_info, #summary, #additional_information").forEach(e=>{d(e)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vanMvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ0ZXh0U2l6ZSIsImNvbXB1dGVkU3R5bGUiLCJ0ZXh0Iiwic3BhbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiZGl2IiwiYXBwZW5kQ2hpbGQiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5VmFsdWUiLCJnZXRQcm9wZXJ0eVByaW9yaXR5IiwidmlzaWJpbGl0eSIsImJvZHkiLCJkYXRhIiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsInJlbW92ZSIsImNhY2hlIiwidGVybSIsInJlc3VsdENhY2hlIiwiX2F1dG9jb21wbGV0ZVVybCIsImVsIiwicXVlcnlTZWxlY3RvciIsImRhdGFzZXQiLCJpbWF0aWNBdXRvY29tcGxldGVVcmwiLCJhdXRvY29tcGxldGVVcmwiLCJkZXN0cm95TGlzdEZuIiwiY2xvc2VBdXRvY29tcGxldGVMaXN0RWwiLCJmb2N1c0F1dG9jb21wbGV0ZUxpc3QiLCJmb2N1cyIsImF1dG9jb21wbGV0ZSIsImF1dG9jb21wbGV0aW5nIiwic3RhcnRTZWwiLCJhY3RpdmVDb21wbGV0aW9ucyIsInN0b3BBdXRvY29tcGxldGUiLCJnZXRTZWxlY3Rpb25MZW5ndGgiLCJzZWxlY3Rpb25TdGFydCIsImdldFNlbGVjdGlvbiIsImxlbiIsInNlbGVjdGlvbiIsInN1YnN0ciIsImxlbmd0aCIsIm1hdGNoIiwiaGFuZGxlQ2hhbmdlIiwidiIsInJlY2VpdmVDb21wbGV0aW9ucyIsImNvbXBsZXRpb25zIiwicmVzIiwidjEiLCJ2MiIsImZsYXRBcnJheXNFcXVhbCIsIm9uU2VsZWN0IiwiZm9jdXNJbnB1dCIsIm9uUmVzdHlsZSIsImlucHV0IiwiZm9jdXNlZCIsImNvbXBsZXRpb25FbHMiLCJtYXAiLCJjcmVhdGVUZXh0Tm9kZSIsImxpIiwic2V0QXR0cmlidXRlIiwidWwiLCJjbGFzc05hbWUiLCJjb250cm9sS2V5cyIsIlNldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaGFzIiwiY29kZSIsInByZXZlbnREZWZhdWx0IiwibmV3QWN0aXZlIiwidmFsIiwiJCIsInRhcmdldCIsImZpcnN0TGkiLCJyZXN0eWxlIiwiY2xvc2VJZk91dHNpZGVUYXJnZXQiLCJjb250YWlucyIsInNjQ29udGFpbmVyIiwiY2xvc2VzdCIsInRleHRBcmVhIiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib3BlbkF1dG9jb21wbGV0ZUxpc3RFbCIsInJlcXVpcmVkU2VsIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzZXRSYW5nZVRleHQiLCJsaXN0RWwiLCJsaXN0UG9zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZWxTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwibGlzdFBvc0xpIiwidGV4dEhlaWdodCIsInBvc2l0aW9uIiwibGVmdCIsIk1hdGgiLCJtYXgiLCJ4IiwidG9wIiwieSIsInNjcm9sbFRvcCIsImNsaWVudFdpZHRoIiwibGlQb3MiLCJwb3NEaWYiLCJmZXRjaCIsInVybCIsIlVSTCIsImxvY2F0aW9uIiwiaHJlZiIsInNlYXJjaFBhcmFtcyIsImFwcGVuZCIsInNlYXJjaFVybCIsInRoZW4iLCJqc29uIiwiYXNzaWduIiwic2V0VGltZW91dCIsInF1ZXJ5U2VsZWN0b3JBbGwiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIs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QTRCUyx3QkFDNURlLEVBQVNoQixFQUFRWSxFQUFJRyxFQUFNSCxFQUFLLEdBR2xDSSxHQUZPLEtBR1BqQixFQUFPbkYsTUFBTStGLElBQU1YLEVBQVFZLEVBQUlQLEVBQWEsRUFBSXpFLEVBQUdpRixVQUFZRyxFQUFTLFdBTzVGLEdEaFNtQixNQUFwQm5JLEVDZ1NlNkMsRUFBYXlCLEdBQ3ZCLE9BQU9DLEVBQW1CLEVBQVUxQixFQUFheUIsSUFHckQ4RCxNQXlEWixTQUFtQmxILEdBQ2YsTUFBTW1ILEVBQU0sSUFBSUMsSUFBSXhGLEVBQWtCeUYsU0FBU0MsTUFHL0MsT0FGQUgsRUFBSUksYUFBYUMsT0FBTyxTQUFVeEgsR0FFM0JtSCxFQTdET00sQ0FBVXJFLElBQ1hzRSxLQUFNbkUsR0FBUUEsRUFBSW9FLFFBQ2xCRCxLQUFNcEUsSUFDSDNCLEVEaFRiLFNBQWFGLEVBQU9DLEVBQU14QyxHQUM3QixPQUFPUCxPQUFPaUosT0FBTyxHQUFJbkcsRUFBTyxDQUFDLENBQUNDLEdBQU94QyxJQytTWCxDQUFVeUMsRUFBYXlCLEVBQUdFLEdBQ3hDRCxZQXhHUlgsS0E2R1JiLEVBQUc0QyxpQkFBaUIsVUFBWUMsSUFDNUIsR0FBS25DLEVBQUwsQ0FJQSxPQUFRbUMsRUFBRUUsTUFDTixJQUFLLFlBQ0RGLEVBQUVHLGlCQUNGekMsSUFDQSxNQUNKLElBQUssVUFDRE0sSUFDQSxNQUNKLElBQUssWUFDTCxJQUFLLGFBRURtRixXQUFXLElBQU0xRSxJQUFnQixHQUcxQixjQUFYdUIsRUFBRUUsTUFDRnhDLE9BR1JQLEVBQUc0QyxpQkFBaUIsUUFBVUMsSUFDMUJ2QixNQStCZ0IsTUFBcEJ2QixHQUNBdkIsU0FDS3lILGlCQUNHLHlHQUVIbEgsUUFBU2lCLElBQ05TLEVBQWFUIiwiZmlsZSI6ImF1dG9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuICogQHBhcmFtIHtDU1NTdHlsZURlY2xhcmF0aW9ufSBjb21wdXRlZFN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICpcbiAqIEByZXR1cm5zIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGV4dFNpemUoY29tcHV0ZWRTdHlsZSwgdGV4dCkge1xuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgQXJyYXkuZnJvbShjb21wdXRlZFN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGl2LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGtleSksXG4gICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoa2V5KVxuICAgICAgICApO1xuICAgIH0pO1xuICAgIGRpdi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgY29uc3QgZGF0YSA9IHt3aWR0aDogc3Bhbi5vZmZzZXRXaWR0aCwgaGVpZ2h0OiBzcGFuLm9mZnNldEhlaWdodH07XG5cbiAgICBkaXYucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0KGNhY2hlLCB0ZXJtLCB2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjYWNoZSwge1t0ZXJtXTogdmFsdWV9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldChjYWNoZSwgdGVybSkge1xuICAgIHJldHVybiBjYWNoZVt0ZXJtXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhcyhjYWNoZSwgdGVybSkge1xuICAgIHJldHVybiBnZXQoY2FjaGUsIHRlcm0pICE9IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCZXN0TWF0Y2goY2FjaGUsIHRlcm0pIHtcbiAgICBmb3IgKGxldCBpID0gdGVybS5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gZ2V0KGNhY2hlLCB0ZXJtLnN1YnN0cigwLCBpKSk7XG4gICAgICAgIGlmIChyZXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIHUgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgKiBhcyBjYWNoZSBmcm9tICcuL2NhY2hlJztcblxubGV0IHJlc3VsdENhY2hlID0gY2FjaGUuY3JlYXRlKCk7XG5jb25zdCBfYXV0b2NvbXBsZXRlVXJsID0gYXV0b2NvbXBsZXRlVXJsKCk7XG5jb25zdCBtYXhfbGVuID0gMTkxO1xubGV0IGRlc3Ryb3lMaXN0Rm47XG5cbmZ1bmN0aW9uIGZsYXRBcnJheXNFcXVhbCh2MSwgdjIpIHtcbiAgICBpZiAodjEgPT0gbnVsbCB8fCB2MiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB2MSA9PSBudWxsICYmIHYyID09IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHYxLmxlbmd0aCAhPT0gdjIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHYxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh2MVtpXSAhPT0gdjJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBvcGVuQXV0b2NvbXBsZXRlTGlzdEVsKHtcbiAgICBjb21wbGV0aW9ucyxcbiAgICBvblNlbGVjdCxcbiAgICBmb2N1c0lucHV0LFxuICAgIG9uUmVzdHlsZSxcbiAgICBpbnB1dCxcbn0pIHtcbiAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuXG4gICAgbGV0IGZvY3VzZWQgPSAwO1xuXG4gICAgY29uc3QgY29tcGxldGlvbkVscyA9IGNvbXBsZXRpb25zLm1hcCgodikgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodik7XG5cbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpO1xuICAgICAgICBsaS5hcHBlbmRDaGlsZCh0ZXh0KTtcblxuICAgICAgICByZXR1cm4gbGk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdWwuY2xhc3NOYW1lID0gJ2ltYXRpYy1hdXRvY29tcGxldGUnO1xuICAgIHVsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaW1hdGljQXV0b2NvbXBsZXRlV2lkZ2V0Jyk7XG4gICAgdWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTtcbiAgICBjb21wbGV0aW9uRWxzLmZvckVhY2goKGVsKSA9PiB1bC5hcHBlbmRDaGlsZChlbCkpO1xuXG4gICAgY29uc3QgY29udHJvbEtleXMgPSBuZXcgU2V0KFsnQXJyb3dEb3duJywgJ0Fycm93VXAnLCAnRW50ZXInXSk7XG5cbiAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sS2V5cy5oYXMoZS5jb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZ1xuXG4gICAgICAgIHN3aXRjaCAoZS5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1VwJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZSA9IHVsLnF1ZXJ5U2VsZWN0b3IoYGxpOm50aC1jaGlsZCgke2ZvY3VzZWR9KWApO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNlZC0tO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3RpdmUuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c0lucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZSA9IHVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgbGk6bnRoLWNoaWxkKCR7Zm9jdXNlZCArIDJ9KWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWN0aXZlLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25TZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0KHt2YWw6IGNvbXBsZXRpb25zW2ZvY3VzZWRdfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgdmFyIHRleHQgPSAkKGUudGFyZ2V0KS50ZXh0KCk7XG4gICAgICAgIG9uU2VsZWN0KHt2YWw6IHRleHR9KTtcbiAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICB9KVxuXG4gICAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBmaXJzdExpID0gdWwucXVlcnlTZWxlY3RvcignbGknKTtcbiAgICAgICAgZm9jdXNlZCA9IDA7XG4gICAgICAgIGlmIChmaXJzdExpKSB7XG4gICAgICAgICAgICBmaXJzdExpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3R5bGUgPSAoKSA9PiBvblJlc3R5bGUodWwpO1xuXG4gICAgY29uc3QgY2xvc2VJZk91dHNpZGVUYXJnZXQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGlucHV0IHx8IGUudGFyZ2V0ID09PSB1bCB8fCB1bC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNjQ29udGFpbmVyID0gaW5wdXQuY2xvc2VzdCgnLnRhYmxlLXJlc3BvbnNpdmUnKTtcblxuICAgIHZhciB0ZXh0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWdub3RlX3RleHQnKVxuXG4gICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCByZXN0eWxlKTtcbiAgICB0ZXh0QXJlYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc3R5bGUpO1xuICAgIHRleHRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc3R5bGUpO1xuICAgIFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzdHlsZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgaWYgKHNjQ29udGFpbmVyKSB7XG4gICAgICAgIHNjQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG5cbiAgICBkZXN0cm95TGlzdEZuID0gKCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCByZXN0eWxlKTtcbiAgICAgICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXN0eWxlKTtcbiAgICAgICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzdHlsZSk7XG5cbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzdHlsZSk7XG4gICAgICAgIGlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgICAgICBpZiAoc2NDb250YWluZXIpIHtcbiAgICAgICAgICAgIHNjQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlSWZPdXRzaWRlVGFyZ2V0KTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodWwpO1xuXG4gICAgcmVzdHlsZSgpO1xufVxuXG5mdW5jdGlvbiBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpIHtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbWF0aWNBdXRvY29tcGxldGVXaWRnZXQnKTtcbiAgICBpZiAoZWwpIHtcbiAgICAgICAgZGVzdHJveUxpc3RGbigpO1xuICAgICAgICBlbC5yZW1vdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvY3VzQXV0b2NvbXBsZXRlTGlzdCgpIHtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbWF0aWNBdXRvY29tcGxldGVXaWRnZXQnKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbC5mb2N1cygpO1xufVxuXG5mdW5jdGlvbiBhdXRvY29tcGxldGUoZWwpIHtcbiAgICBsZXQgYXV0b2NvbXBsZXRpbmcgPSBmYWxzZTtcbiAgICBsZXQgc3RhcnRTZWwgPSAwO1xuICAgIGxldCBhY3RpdmVDb21wbGV0aW9ucyA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBzdG9wQXV0b2NvbXBsZXRlKCkge1xuICAgICAgICBpZiAoIWF1dG9jb21wbGV0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhdXRvY29tcGxldGluZyA9IGZhbHNlO1xuICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNlbGVjdGlvbkxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIGVsLnNlbGVjdGlvblN0YXJ0IC0gc3RhcnRTZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBsZW4gPSBnZXRTZWxlY3Rpb25MZW5ndGgoKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWwudmFsdWUuc3Vic3RyKHN0YXJ0U2VsLCBsZW4pO1xuXG4gICAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwIHx8IHNlbGVjdGlvbi5tYXRjaCgvW1xcbiBdLykgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGVsLnNlbGVjdGlvblN0YXJ0ID09PSAwKSB7XG4gICAgICAgICAgICBzdG9wQXV0b2NvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWwudmFsdWVbZWwuc2VsZWN0aW9uU3RhcnQgLSAxXSA9PT0gJ0AnKSB7XG4gICAgICAgICAgICBhdXRvY29tcGxldGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGFydFNlbCA9IGVsLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgYWN0aXZlQ29tcGxldGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF1dG9jb21wbGV0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCB2ID0gZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RvcEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVjZWl2ZUNvbXBsZXRpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zID0gY2FjaGUuZ2V0QmVzdE1hdGNoKFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VsZWN0aW9uKClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnMgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9ucy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgIWF1dG9jb21wbGV0aW5nXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNvbXBsZXRpb25zID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmbGF0QXJyYXlzRXF1YWwoYWN0aXZlQ29tcGxldGlvbnMsIGNvbXBsZXRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuID0gZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgYWN0aXZlQ29tcGxldGlvbnMgPSBjb21wbGV0aW9ucztcblxuICAgICAgICAgICAgICAgIG9wZW5BdXRvY29tcGxldGVMaXN0RWwoe1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uczogY29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiBlbCxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNJbnB1dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRTZWwgPSBzdGFydFNlbCArIGxlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRTZWxlY3Rpb25SYW5nZShyZXF1aXJlZFNlbCwgcmVxdWlyZWRTZWwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblNlbGVjdDogKHt2YWx9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dG9jb21wbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZFNlbCA9IHN0YXJ0U2VsICsgbGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldFJhbmdlVGV4dChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwuc3Vic3RyKGxlbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRTZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRTZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzdHlsZTogKGxpc3RFbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdFBvcyA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxTdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaXN0UG9zTGkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hdGljQXV0b2NvbXBsZXRlV2lkZ2V0JylcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEhlaWdodCA9IHUudGV4dFNpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxTdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwudmFsdWUuc3Vic3RyKDAsIGVsLnNlbGVjdGlvblN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgKS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RFbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUubGVmdCA9IE1hdGgubWF4KDAsIGxpc3RQb3MueCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLnRvcCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFBvcy55ICsgdGV4dEhlaWdodCArIDUgLSBlbC5zY3JvbGxUb3AgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLndpZHRoID0gZWwuY2xpZW50V2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFBvc0xpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEhlaWdodCA9IHUudGV4dFNpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsU3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC52YWx1ZS5zdWJzdHIoMCwgZWwuc2VsZWN0aW9uU3RhcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaVBvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWF0aWNBdXRvY29tcGxldGVXaWRnZXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NEaWYgPSBsaXN0UG9zLnkgLSBsaVBvcy55ICArIDI1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IC0yMFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NEaWYgPiBuICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUudG9wID0gbGlzdFBvcy55ICsgdGV4dEhlaWdodCArIDUgLSBlbC5zY3JvbGxUb3AgKyBwb3NEaWYgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChjYWNoZS5oYXMocmVzdWx0Q2FjaGUsIHYpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVDb21wbGV0aW9ucyhjYWNoZS5nZXQocmVzdWx0Q2FjaGUsIHYpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmV0Y2goc2VhcmNoVXJsKHYpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvbXBsZXRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdENhY2hlID0gY2FjaGUuc2V0KHJlc3VsdENhY2hlLCB2LCBjb21wbGV0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVDb21wbGV0aW9ucygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAoIWF1dG9jb21wbGV0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGUuY29kZSkge1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgZm9jdXNBdXRvY29tcGxldGVMaXN0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgICAgICBzdG9wQXV0b2NvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgZWxlbWVudCBoYXMgY29ycmVjdCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGhhbmRsZUNoYW5nZSgpLCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgZm9jdXNBdXRvY29tcGxldGVMaXN0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIGhhbmRsZUNoYW5nZSgpO1xuICAgIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGdldE9mZnNldChlbCkge1xuICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIHJldHVybiByZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZXG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IHJlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYLFxuICAgICAgdG9wOiByZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZXG4gICAgfTtcbiAgfVxuXG5mdW5jdGlvbiBhdXRvY29tcGxldGVVcmwoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbWF0aWMtYXV0b2NvbXBsZXRlLXVybF0nKTtcbiAgICBpZiAoZWwgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsLmRhdGFzZXQuaW1hdGljQXV0b2NvbXBsZXRlVXJsO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hVcmwocykge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoX2F1dG9jb21wbGV0ZVVybCwgbG9jYXRpb24uaHJlZik7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3NlYXJjaCcsIHMpO1xuXG4gICAgcmV0dXJuIHVybDtcbn1cblxuaWYgKF9hdXRvY29tcGxldGVVcmwgIT0gbnVsbCkge1xuICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgICAgJyNidWdub3RlX3RleHQsICNkZXNjcmlwdGlvbiwgI3N0ZXBzX3RvX3JlcHJvZHVjZSwgI2FkZGl0aW9uYWxfaW5mbywgI3N1bW1hcnksICNhZGRpdGlvbmFsX2luZm9ybWF0aW9uJ1xuICAgICAgICApXG4gICAgICAgIC5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgYXV0b2NvbXBsZXRlKGVsKTtcbiAgICAgICAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9