!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){return e[t]}n.r(t);let r={};const i=function(){const e=document.querySelector("[data-imatic-autocomplete-url]");if(null===e)return null;return e.dataset.imaticAutocompleteUrl}();let c;function l(){const e=document.querySelector("#imaticAutocompleteWidget");e&&(c(),e.remove())}function u(){const e=document.querySelector("#imaticAutocompleteWidget");e&&e.focus()}function s(e){let t=!1,n=0,s=null;function a(){t&&(t=!1,l())}function d(){return e.selectionStart-n}function f(){const t=d(),o=e.value.substr(n,t);return 0===o.length||null!=o.match(/[\n ]/)?null:o}const p=()=>{if(0!==e.selectionStart){if("@"===e.value[e.selectionStart-1])return t=!0,n=e.selectionStart,void(s=null);if(t){const u=f();if(null==u)return void a();const p=()=>{const i=function(e,t){for(let n=t.length;n>0;n--){const r=o(e,t.substr(0,n));if(null!=r)return r}}(r,f());if(null==i||0===i.length||!t)return l(),void(s=null);if(function(e,t){if(null==e||null==t)return null==e&&null==t;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(s,i))return;const u=d();s=i,function({completions:e,onSelect:t,focusInput:n,onRestyle:o,input:r}){l();let i=0;const u=e.map(e=>{const t=document.createTextNode(e),n=document.createElement("li");return n.setAttribute("tabindex",-1),n.appendChild(t),n}),s=document.createElement("ul");s.className="imatic-autocomplete",s.setAttribute("id","imaticAutocompleteWidget"),s.setAttribute("tabindex",-1),u.forEach(e=>s.appendChild(e));const a=new Set(["ArrowDown","ArrowUp","Enter"]);s.addEventListener("keydown",o=>{if(a.has(o.code))switch(o.preventDefault(),o.code){case"ArrowUp":{const e=s.querySelector(`li:nth-child(${i})`);e?(i--,e.focus()):n();break}case"ArrowDown":{const e=s.querySelector(`li:nth-child(${i+2})`);e&&(i++,e.focus())}break;case"Enter":t&&t({val:e[i]}),l()}}),s.addEventListener("click",e=>{var n=$(e.target).text();t({val:n}),l()}),s.addEventListener("focus",e=>{const t=s.querySelector("li");i=0,t&&t.focus()});const d=()=>o(s),f=e=>{e.target===r||e.target===s||s.contains(e.target)||l()},p=r.closest(".table-responsive");window.addEventListener("scroll",d),window.addEventListener("resize",d),r.addEventListener("scroll",d),p&&p.addEventListener("scroll",d),window.addEventListener("click",f),window.addEventListener("focusin",f),c=()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d),r.removeEventListener("scroll",d),p&&p.removeEventListener("scroll",d),window.removeEventListener("click",f),window.removeEventListener("focusin",f)},document.body.appendChild(s),d()}({completions:i,input:e,focusInput:()=>{const t=n+u;e.focus(),e.setSelectionRange(t,t)},onSelect:({val:o})=>{if(!t)return;const r=n+u;e.focus(),e.setRangeText(o.substr(u),r,r,"end")},onRestyle:t=>{const n=e.getBoundingClientRect(),o=function(e,t){const n=document.createElement("span");n.textContent=t;const o=document.createElement("div");o.appendChild(n),Array.from(e).forEach((function(t){o.style.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})),o.style.visibility="hidden",document.body.appendChild(o);const r={width:n.offsetWidth,height:n.offsetHeight};return o.remove(),r}(getComputedStyle(e),e.value.substr(0,e.selectionStart)).height;t.style.position="fixed",t.style.left=Math.max(0,n.x)+"px",t.style.top=n.top+o+5+"px",t.style.bottom="auto",t.style.width=e.clientWidth+"px"}})};if(null!=o(r,u))return p(o(r,u));fetch(function(e){const t=new URL(i,location.href);return t.searchParams.append("search",e),t}(u)).then(e=>e.json()).then(e=>{r=function(e,t,n){return Object.assign({},e,{[t]:n})}(r,u,e),p()})}}else a()};e.addEventListener("keydown",e=>{if(t){switch(e.code){case"ArrowDown":e.preventDefault(),u();break;case"ArrowUp":a();break;case"ArrowLeft":case"ArrowRight":setTimeout(()=>p(),0)}"ArrowDown"===e.code&&u()}}),e.addEventListener("input",e=>{p()})}null!=i&&document.querySelectorAll("#bugnote_text, #description, #steps_to_reproduce, #additional_info, #summary, #additional_information").forEach(e=>{s(e)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vanMvdXRpbHMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjYWNoZSIsInRlcm0iLCJyZXN1bHRDYWNoZSIsIl9hdXRvY29tcGxldGVVcmwiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRhdGFzZXQiLCJpbWF0aWNBdXRvY29tcGxldGVVcmwiLCJhdXRvY29tcGxldGVVcmwiLCJkZXN0cm95TGlzdEZuIiwiY2xvc2VBdXRvY29tcGxldGVMaXN0RWwiLCJyZW1vdmUiLCJmb2N1c0F1dG9jb21wbGV0ZUxpc3QiLCJmb2N1cyIsImF1dG9jb21wbGV0ZSIsImF1dG9jb21wbGV0aW5nIiwic3RhcnRTZWwiLCJhY3RpdmVDb21wbGV0aW9ucyIsInN0b3BBdXRvY29tcGxldGUiLCJnZXRTZWxlY3Rpb25MZW5ndGgiLCJzZWxlY3Rpb25TdGFydCIsImdldFNlbGVjdGlvbiIsImxlbiIsInNlbGVjdGlvbiIsInN1YnN0ciIsImxlbmd0aCIsIm1hdGNoIiwiaGFuZGxlQ2hhbmdlIiwidiIsInJlY2VpdmVDb21wbGV0aW9ucyIsImNvbXBsZXRpb25zIiwicmVzIiwidjEiLCJ2MiIsImZsYXRBcnJheXNFcXVhbCIsIm9uU2VsZWN0IiwiZm9jdXNJbnB1dCIsIm9uUmVzdHlsZSIsImlucHV0IiwiZm9jdXNlZCIsImNvbXBsZXRpb25FbHMiLCJtYXAiLCJ0ZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsInVsIiwiY2xhc3NOYW1lIiwiZm9yRWFjaCIsImNvbnRyb2xLZXlzIiwiU2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJoYXMiLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJuZXdBY3RpdmUiLCJ2YWwiLCIkIiwidGFyZ2V0IiwiZmlyc3RMaSIsInJlc3R5bGUiLCJjbG9zZUlmT3V0c2lkZVRhcmdldCIsImNvbnRhaW5zIiwic2NDb250YWluZXIiLCJjbG9zZXN0Iiwid2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJvcGVuQXV0b2NvbXBsZXRlTGlzdEVsIiwicmVxdWlyZWRTZWwiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInNldFJhbmdlVGV4dCIsImxpc3RFbCIsImxpc3RQb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0ZXh0SGVpZ2h0IiwiY29tcHV0ZWRTdHlsZSIsInNwYW4iLCJ0ZXh0Q29udGVudCIsImRpdiIsIkFycmF5IiwiZnJvbSIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZ2V0UHJvcGVydHlQcmlvcml0eSIsInZpc2liaWxpdHkiLCJkYXRhIiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJNYXRoIiwibWF4IiwieCIsInRvcCIsImJvdHRvbSIsImNsaWVudFdpZHRoIiwiZmV0Y2giLCJ1cmwiLCJVUkwiLCJsb2NhdGlvbiIsImhyZWYiLCJzZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJzZWFyY2hVcmwiLCJ0aGVuIiwianNvbiIsImFzc2lnbiIsInNldFRpbWVvdXQiLCJxdWVyeVNlbGVjdG9yQWxsIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlC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dUMsRUFBRUUsTUFDTixJQUFLLFlBQ0RGLEVBQUVHLGlCQUNGN0MsSUFDQSxNQUNKLElBQUssVUFDRE0sSUFDQSxNQUNKLElBQUssWUFDTCxJQUFLLGFBRURpRyxXQUFXLElBQU14RixJQUFnQixHQUcxQixjQUFYMkIsRUFBRUUsTUFDRjVDLE9BR1JULEVBQUdrRCxpQkFBaUIsUUFBVUMsSUFDMUIzQixNQStCZ0IsTUFBcEJ6QixHQUNBRSxTQUNLZ0gsaUJBQ0cseUdBRUhsRSxRQUFTL0MsSUFDTlcsRUFBYVgiLCJmaWxlIjoiYXV0b2NvbXBsZXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4ge307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQoY2FjaGUsIHRlcm0sIHZhbHVlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNhY2hlLCB7W3Rlcm1dOiB2YWx1ZX0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNhY2hlLCB0ZXJtKSB7XG4gICAgcmV0dXJuIGNhY2hlW3Rlcm1dO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzKGNhY2hlLCB0ZXJtKSB7XG4gICAgcmV0dXJuIGdldChjYWNoZSwgdGVybSkgIT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJlc3RNYXRjaChjYWNoZSwgdGVybSkge1xuICAgIGZvciAobGV0IGkgPSB0ZXJtLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgICBjb25zdCByZXMgPSBnZXQoY2FjaGUsIHRlcm0uc3Vic3RyKDAsIGkpKTtcbiAgICAgICAgaWYgKHJlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgdSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCAqIGFzIGNhY2hlIGZyb20gJy4vY2FjaGUnO1xuXG5sZXQgcmVzdWx0Q2FjaGUgPSBjYWNoZS5jcmVhdGUoKTtcbmNvbnN0IF9hdXRvY29tcGxldGVVcmwgPSBhdXRvY29tcGxldGVVcmwoKTtcbmNvbnN0IG1heF9sZW4gPSAxOTE7XG5sZXQgZGVzdHJveUxpc3RGbjtcblxuZnVuY3Rpb24gZmxhdEFycmF5c0VxdWFsKHYxLCB2Mikge1xuICAgIGlmICh2MSA9PSBudWxsIHx8IHYyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHYxID09IG51bGwgJiYgdjIgPT0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodjEubGVuZ3RoICE9PSB2Mi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdjEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHYxW2ldICE9PSB2MltpXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIG9wZW5BdXRvY29tcGxldGVMaXN0RWwoe1xuICAgIGNvbXBsZXRpb25zLFxuICAgIG9uU2VsZWN0LFxuICAgIGZvY3VzSW5wdXQsXG4gICAgb25SZXN0eWxlLFxuICAgIGlucHV0LFxufSkge1xuICAgIGNsb3NlQXV0b2NvbXBsZXRlTGlzdEVsKCk7XG5cbiAgICBsZXQgZm9jdXNlZCA9IDA7XG5cbiAgICBjb25zdCBjb21wbGV0aW9uRWxzID0gY29tcGxldGlvbnMubWFwKCh2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2KTtcblxuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XG4gICAgICAgIGxpLmFwcGVuZENoaWxkKHRleHQpO1xuXG4gICAgICAgIHJldHVybiBsaTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICB1bC5jbGFzc05hbWUgPSAnaW1hdGljLWF1dG9jb21wbGV0ZSc7XG4gICAgdWwuc2V0QXR0cmlidXRlKCdpZCcsICdpbWF0aWNBdXRvY29tcGxldGVXaWRnZXQnKTtcbiAgICB1bC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpO1xuICAgIGNvbXBsZXRpb25FbHMuZm9yRWFjaCgoZWwpID0+IHVsLmFwcGVuZENoaWxkKGVsKSk7XG5cbiAgICBjb25zdCBjb250cm9sS2V5cyA9IG5ldyBTZXQoWydBcnJvd0Rvd24nLCAnQXJyb3dVcCcsICdFbnRlciddKTtcblxuICAgIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAoIWNvbnRyb2xLZXlzLmhhcyhlLmNvZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgc2Nyb2xsaW5nXG5cbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlID0gdWwucXVlcnlTZWxlY3RvcihgbGk6bnRoLWNoaWxkKCR7Zm9jdXNlZH0pYCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c2VkLS07XG4gICAgICAgICAgICAgICAgICAgIG5ld0FjdGl2ZS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlID0gdWwucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGBsaTpudGgtY2hpbGQoJHtmb2N1c2VkICsgMn0pYFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBY3RpdmUuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvblNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Qoe3ZhbDogY29tcGxldGlvbnNbZm9jdXNlZF19KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICB2YXIgdGV4dCA9ICQoZS50YXJnZXQpLnRleHQoKTtcbiAgICAgICAgb25TZWxlY3Qoe3ZhbDogdGV4dH0pO1xuICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuICAgIH0pXG5cbiAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpcnN0TGkgPSB1bC5xdWVyeVNlbGVjdG9yKCdsaScpO1xuICAgICAgICBmb2N1c2VkID0gMDtcbiAgICAgICAgaWYgKGZpcnN0TGkpIHtcbiAgICAgICAgICAgIGZpcnN0TGkuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdHlsZSA9ICgpID0+IG9uUmVzdHlsZSh1bCk7XG5cbiAgICBjb25zdCBjbG9zZUlmT3V0c2lkZVRhcmdldCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gaW5wdXQgfHwgZS50YXJnZXQgPT09IHVsIHx8IHVsLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2NDb250YWluZXIgPSBpbnB1dC5jbG9zZXN0KCcudGFibGUtcmVzcG9uc2l2ZScpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc3R5bGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXN0eWxlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICBpZiAoc2NDb250YWluZXIpIHtcbiAgICAgICAgc2NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzdHlsZSk7XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlSWZPdXRzaWRlVGFyZ2V0KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGNsb3NlSWZPdXRzaWRlVGFyZ2V0KTtcblxuICAgIGRlc3Ryb3lMaXN0Rm4gPSAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc3R5bGUpO1xuICAgICAgICBpbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICAgICAgaWYgKHNjQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBzY0NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUlmT3V0c2lkZVRhcmdldCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgY2xvc2VJZk91dHNpZGVUYXJnZXQpO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHVsKTtcblxuICAgIHJlc3R5bGUoKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW1hdGljQXV0b2NvbXBsZXRlV2lkZ2V0Jyk7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGRlc3Ryb3lMaXN0Rm4oKTtcbiAgICAgICAgZWwucmVtb3ZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmb2N1c0F1dG9jb21wbGV0ZUxpc3QoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW1hdGljQXV0b2NvbXBsZXRlV2lkZ2V0Jyk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWwuZm9jdXMoKTtcbn1cblxuZnVuY3Rpb24gYXV0b2NvbXBsZXRlKGVsKSB7XG4gICAgbGV0IGF1dG9jb21wbGV0aW5nID0gZmFsc2U7XG4gICAgbGV0IHN0YXJ0U2VsID0gMDtcbiAgICBsZXQgYWN0aXZlQ29tcGxldGlvbnMgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gc3RvcEF1dG9jb21wbGV0ZSgpIHtcbiAgICAgICAgaWYgKCFhdXRvY29tcGxldGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXV0b2NvbXBsZXRpbmcgPSBmYWxzZTtcbiAgICAgICAgY2xvc2VBdXRvY29tcGxldGVMaXN0RWwoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZWxlY3Rpb25MZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiBlbC5zZWxlY3Rpb25TdGFydCAtIHN0YXJ0U2VsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNlbGVjdGlvbigpIHtcbiAgICAgICAgY29uc3QgbGVuID0gZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVsLnZhbHVlLnN1YnN0cihzdGFydFNlbCwgbGVuKTtcblxuICAgICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3Rpb24ubWF0Y2goL1tcXG4gXS8pICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlbC5zZWxlY3Rpb25TdGFydCA9PT0gMCkge1xuICAgICAgICAgICAgc3RvcEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsLnZhbHVlW2VsLnNlbGVjdGlvblN0YXJ0IC0gMV0gPT09ICdAJykge1xuICAgICAgICAgICAgYXV0b2NvbXBsZXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRTZWwgPSBlbC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIGFjdGl2ZUNvbXBsZXRpb25zID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdXRvY29tcGxldGluZykge1xuICAgICAgICAgICAgY29uc3QgdiA9IGdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHYgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0b3BBdXRvY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVDb21wbGV0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9ucyA9IGNhY2hlLmdldEJlc3RNYXRjaChcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q2FjaGUsXG4gICAgICAgICAgICAgICAgICAgIGdldFNlbGVjdGlvbigpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICFhdXRvY29tcGxldGluZ1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjbG9zZUF1dG9jb21wbGV0ZUxpc3RFbCgpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDb21wbGV0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZmxhdEFycmF5c0VxdWFsKGFjdGl2ZUNvbXBsZXRpb25zLCBjb21wbGV0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbiA9IGdldFNlbGVjdGlvbkxlbmd0aCgpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZUNvbXBsZXRpb25zID0gY29tcGxldGlvbnM7XG5cbiAgICAgICAgICAgICAgICBvcGVuQXV0b2NvbXBsZXRlTGlzdEVsKHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnM6IGNvbXBsZXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogZWwsXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzSW5wdXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkU2VsID0gc3RhcnRTZWwgKyBsZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc2V0U2VsZWN0aW9uUmFuZ2UocmVxdWlyZWRTZWwsIHJlcXVpcmVkU2VsKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q6ICh7dmFsfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRvY29tcGxldGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRTZWwgPSBzdGFydFNlbCArIGxlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRSYW5nZVRleHQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsLnN1YnN0cihsZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkU2VsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkU2VsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbmQnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblJlc3R5bGU6IChsaXN0RWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RQb3MgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsU3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRIZWlnaHQgPSB1LnRleHRTaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsU3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnZhbHVlLnN1YnN0cigwLCBlbC5zZWxlY3Rpb25TdGFydClcbiAgICAgICAgICAgICAgICAgICAgICAgICkuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLmxlZnQgPSBNYXRoLm1heCgwLCBsaXN0UG9zLngpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpc3RFbC5zdHlsZS50b3AgPSBsaXN0UG9zLnkgKyB0ZXh0SGVpZ2h0ICsgNSAtIGVsLnNjcm9sbFRvcCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUudG9wID0gbGlzdFBvcy50b3AgKyB0ZXh0SGVpZ2h0ICsgNSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc3R5bGUuYm90dG9tID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnN0eWxlLndpZHRoID0gZWwuY2xpZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGNhY2hlLmhhcyhyZXN1bHRDYWNoZSwgdikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZUNvbXBsZXRpb25zKGNhY2hlLmdldChyZXN1bHRDYWNoZSwgdikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmZXRjaChzZWFyY2hVcmwodikpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAudGhlbigoY29tcGxldGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q2FjaGUgPSBjYWNoZS5zZXQocmVzdWx0Q2FjaGUsIHYsIGNvbXBsZXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZUNvbXBsZXRpb25zKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmICghYXV0b2NvbXBsZXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoZS5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gcHJldmVudCBzY3JvbGxpbmdcbiAgICAgICAgICAgICAgICBmb2N1c0F1dG9jb21wbGV0ZUxpc3QoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgIHN0b3BBdXRvY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCBlbGVtZW50IGhhcyBjb3JyZWN0IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaGFuZGxlQ2hhbmdlKCksIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICBmb2N1c0F1dG9jb21wbGV0ZUxpc3QoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgaGFuZGxlQ2hhbmdlKCk7XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gZ2V0T2Zmc2V0KGVsKSB7XG4gICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgcmV0dXJuIHJlY3QudG9wICsgd2luZG93LnNjcm9sbFlcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFgsXG4gICAgICB0b3A6IHJlY3QudG9wICsgd2luZG93LnNjcm9sbFlcbiAgICB9O1xuICB9XG5cbmZ1bmN0aW9uIGF1dG9jb21wbGV0ZVVybCgpIHtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWltYXRpYy1hdXRvY29tcGxldGUtdXJsXScpO1xuICAgIGlmIChlbCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWwuZGF0YXNldC5pbWF0aWNBdXRvY29tcGxldGVVcmw7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaFVybChzKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChfYXV0b2NvbXBsZXRlVXJsLCBsb2NhdGlvbi5ocmVmKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnc2VhcmNoJywgcyk7XG5cbiAgICByZXR1cm4gdXJsO1xufVxuXG5pZiAoX2F1dG9jb21wbGV0ZVVybCAhPSBudWxsKSB7XG4gICAgZG9jdW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgICAnI2J1Z25vdGVfdGV4dCwgI2Rlc2NyaXB0aW9uLCAjc3RlcHNfdG9fcmVwcm9kdWNlLCAjYWRkaXRpb25hbF9pbmZvLCAjc3VtbWFyeSwgI2FkZGl0aW9uYWxfaW5mb3JtYXRpb24nXG4gICAgICAgIClcbiAgICAgICAgLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBhdXRvY29tcGxldGUoZWwpO1xuICAgICAgICB9KTtcbn1cbiIsIi8qKlxuICogQHBhcmFtIHtDU1NTdHlsZURlY2xhcmF0aW9ufSBjb21wdXRlZFN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICpcbiAqIEByZXR1cm5zIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGV4dFNpemUoY29tcHV0ZWRTdHlsZSwgdGV4dCkge1xuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgQXJyYXkuZnJvbShjb21wdXRlZFN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGl2LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGtleSksXG4gICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoa2V5KVxuICAgICAgICApO1xuICAgIH0pO1xuICAgIGRpdi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgY29uc3QgZGF0YSA9IHt3aWR0aDogc3Bhbi5vZmZzZXRXaWR0aCwgaGVpZ2h0OiBzcGFuLm9mZnNldEhlaWdodH07XG5cbiAgICBkaXYucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=